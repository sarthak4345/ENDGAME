import java.io.*;
import java.util.*;

public class MacroOne {
	
	public static void main(String[] args) throws IOException {
		
		FileWriter mntWriter = new FileWriter("MNT.txt");
		FileWriter pntabWriter = new FileWriter("PNTAB.txt");
		FileWriter kpdtWriter = new FileWriter("KPDT.txt");
		FileWriter mdtWriter = new FileWriter("MDT.txt");
		FileWriter ic = new FileWriter("IC.txt");
		LinkedHashMap<String,Integer> pntab = new LinkedHashMap<>();
	
		BufferedReader br = new BufferedReader(new FileReader("input.asm"));
		
		int pp=0,kp=0,mdtp=1,kpdtp=0,paramNo=1,flag=0;
		
		String line,macroname;
		
		while((line = br.readLine())!=null) {
			String parts[] = line.split("\\s+");
			
			if(parts[0].equals("MACRO")) {
				
				flag = 1;
				line = br.readLine();
				parts = line.split("\\s+");
				if(parts.length <=1) {
					mntWriter.write(parts[0]+":\t"+pp+"\t"+kp+"\t"+mdtp+"\t"+((kp==0)?(kpdtp):(kpdtp+1)));
					continue;
				}
				
				for(int i=1;i<parts.length;i++) {
					parts[i] = parts[i].replaceAll("[&,]", "");
					if(parts[i].contains("=")) {
						
						pntab.put(parts[i], paramNo++);
						String splits[] = parts[i].split("=");
						if(splits.length == 2) {
							
							kpdtWriter.write(splits[0]+"\t"+splits[1]+"\n");
							kp++;
							
						}else {
							
							kpdtWriter.write(splits[0]+"\t--\b");
						}
						
					
					}else {
						
						pntab.put(parts[i], paramNo++);
						pp++;
						
					}
				}
			}
			
			
			
		}
		
		mntWriter.close();
		mdtWriter.close();
		pntabWriter.close();
		ic.close();
		kpdtWriter.close();
		
	}

}
